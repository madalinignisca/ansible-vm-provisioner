---

### VM

vm_box: "ubuntu/xenial64"
vm_hostname: "small.vm"
vm_memory: 1024
vm_cpus: 1

vagrant_synced_folders: []

### Important tools
git_packages:
  - git

### SWAP

swapfile_swappiness: 10
swapfile_vfs_cache_pressure: 50

### Firewall

firewall_allowed_tcp_ports:
  - "22"
  - "80"
  - "443"

### USERS and GROUPS

# @see http://docs.ansible.com/ansible/user_module.html
#
# users:
#   - username: foobar              (required)
#     name: Foo Bar
#     uid: 1000
#     group: staff
#     password: xxxxx
#     groups: ["adm", "www-data"]
#     home_mode: "0750"
#     home_create: yes
#     home: /path/to/user/home
#     system: no
#     authorized_keys: []           (required)
#     ssh_key_type: rsa
#     ssh_key_bits: 2048
#     ssh_key_password: ""
#     ssh_key_generate: no
#     ssh_key: "xxx"
#     shell: /bin/bash
#

# default user home directory permissions
users_home_mode: "0750"
# default user primary group for users
users_group: staff
# default user secondary groups
users_groups:
  - www-data

users:
  - username

### Apache HTTPD

apache_listen_port: 8080
apache_listen_port_ssl: 8443

apache_mods_enabled:
  - rewrite.load
  - ssl.load
  - mpm_event.load
apache_mods_disabled:
  - mpm_prefork.load
  - mpm_worker.load

apache_vhost_php_fpm_parameters: |
  <FilesMatch \.php$>
    SetHandler "proxy:fcgi://{{ php_fpm_listen }}"
  </FilesMatch>

### PHP

php_version: '7.1'

# Configure PHP paths and packages for PHP 5.6, PHP 7.0 and PHP 7.1.
php_conf_paths:
  - "/etc/php/{{ php_version }}/fpm"
  - "/etc/php/{{ php_version }}/apache2"
  - "/etc/php/{{ php_version }}/cli"
php_extension_conf_paths:
  - "/etc/php/{{ php_version }}/fpm/conf.d"
  - "/etc/php/{{ php_version }}/apache2/conf.d"
  - "/etc/php/{{ php_version }}/cli/conf.d"
php_fpm_daemon: "php{{ php_version }}-fpm"
php_fpm_conf_path: "/etc/php/{{ php_version }}/fpm"
php_fpm_pool_conf_path: "{{ php_fpm_conf_path }}/pool.d/www.conf"
php_mysql_package: "php{{ php_version }}-mysql"
php_redis_package: "php{{ php_version }}-redis"
php_memcached_package: "php{{ php_version }}-memcached"
php_pgsql_package: "php{{ php_version }}-pgsql"

php_packages:
  - "php{{ php_version }}"
  - "php{{ php_version }}-apcu"
  - "php{{ php_version }}-cli"
  - "php{{ php_version }}-common"
  - "php{{ php_version }}-curl"
  - "php{{ php_version }}-dev"
  - "php{{ php_version }}-fpm"
  - "php{{ php_version }}-gd"
  - "php{{ php_version }}-imap"
  - "php{{ php_version }}-json"
  - "php{{ php_version }}-mbstring"
  - "php{{ php_version }}-mcrypt"
  - "php{{ php_version }}-opcache"
  - "php{{ php_version }}-sqlite3"
  - "php{{ php_version }}-xml"
  - "php{{ php_version }}-yaml"

php_expose_php: "Off"
php_max_execution_time: "180"
php_max_input_vars: "8192"
php_date_timezone: "UTC"
php_output_buffering: "Off"

# Set this to false if you're not using PHP with Apache/Nginx/etc.
php_enable_webserver: true

# PHP-FPM configuration.
php_enable_php_fpm: true
php_fpm_listen: "127.0.0.1:9000"
php_fpm_listen_allowed_clients: "127.0.0.1"
php_fpm_pm_max_children: 2
php_fpm_pm_start_servers: 1
php_fpm_pm_min_spare_servers: 1
php_fpm_pm_max_spare_servers: 2

### Composer and friends

composer_global_packages:
  # - { name: phpunit/phpunit, release: "4.7.x" }
  # - { name: phpunit/phpunit, release: "@stable" }
  - { name: wp-cli/wp-cli, release: "@stable" }

### MySQL

# Memory settings (default values optimized ~128MB RAM).
mysql_key_buffer_size: "64M"
mysql_max_allowed_packet: "16M"
mysql_table_open_cache: "64"
mysql_sort_buffer_size: "1M"
mysql_read_buffer_size: "1M"
mysql_read_rnd_buffer_size: "1M"
mysql_myisam_sort_buffer_size: "8M"
mysql_thread_cache_size: "1"
mysql_query_cache_size: "16M"
mysql_query_cache_limit: "1M"
mysql_max_connections: "64"
mysql_tmp_table_size: "16M"
mysql_max_heap_table_size: "16M"

# Set .._buffer_pool_size up to 80% of RAM but beware of setting too high.
mysql_innodb_buffer_pool_size: "64M"

# Replication settings (replication is only enabled if master/user have values).
mysql_max_binlog_size: "10M"
mysql_expire_logs_days: "7"

# Set this to the user ansible is logging in as - should have root
# or sudo access
mysql_user_home: /home/ubuntu
mysql_user_name: ubuntu
mysql_user_password: ubuntu

# The default root user installed by mysql - almost always root
mysql_root_home: /root
mysql_root_username: root
mysql_root_password: root

# Set this to `yes` to forcibly update the root password.
mysql_root_password_update: yes
mysql_user_password_update: yes

### Varnish

varnish_listen_port: "7080"

### Nginx

nginx_ppa_use: true
nginx_package_name: "nginx-light"

nginx_extra_http_options: |
  proxy_redirect     off;
  proxy_buffering    off;
  proxy_set_header   X-Real-IP $remote_addr;
  proxy_set_header   X-Scheme $scheme;
  proxy_set_header   X-Forwarded-For $proxy_add_x_forwarded_for;
  proxy_set_header   Host $http_host;
nginx_proxy_cache_path: "/var/cache/nginx keys_zone=cache:32m"

nginx_remove_default_vhost: true
